---
import BaseLayout from "../layouts/BaseLayout.astro";
---
<BaseLayout
  title="Contatti — Auriga"
  headerTheme="light"
  headerClass="bg-white"
  headerStyle="background-color:#ffffff"
  pageBg="light"
>
  <section class="relative overflow-hidden text-white min-h-screen">
    <!-- Mesh gradient background -->
    <div class="absolute inset-0 bg-[#1a0a2e]"></div>

    <!-- BORDO SINISTRO -->
    <div class="absolute top-[0%] left-[-15%] w-[50%] h-[45%] rounded-full bg-[#7c3aed] opacity-75 blur-[130px]"></div>
    <div class="absolute top-[45%] left-[-10%] w-[45%] h-[40%] rounded-full bg-[#3b82f6] opacity-65 blur-[120px]"></div>

    <!-- BORDO DESTRO -->
    <div class="absolute top-[0%] right-[-15%] w-[50%] h-[45%] rounded-full bg-[#ec4899] opacity-75 blur-[130px]"></div>
    <div class="absolute top-[40%] right-[-10%] w-[45%] h-[40%] rounded-full bg-[#f97316] opacity-60 blur-[120px]"></div>

    <!-- CENTRO -->
    <div class="absolute top-[15%] left-[25%] w-[50%] h-[40%] rounded-full bg-[#c084fc] opacity-50 blur-[120px]"></div>
    <div class="absolute top-[50%] left-[30%] w-[45%] h-[35%] rounded-full bg-[#06b6d4] opacity-45 blur-[115px]"></div>

    <!-- Hero content -->
    <div class="relative z-10 min-h-[380px] md:min-h-[440px] flex items-center justify-center">
      <div class="max-w-3xl mx-auto px-6 pt-6 pb-24 md:pt-10 md:pb-28 text-center">
        <h1 class="text-4xl md:text-6xl font-bold tracking-tight drop-shadow-lg">Contatti</h1>
        <p class="mt-4 text-white/80 text-lg">Scrivici per informazioni su corsi, eventi e collaborazioni</p>
      </div>
    </div>

    <!-- Content -->
    <div class="relative z-10 pb-20 md:pb-28">
      <div class="max-w-5xl mx-auto px-4">
        <div class="rounded-[28px] border border-white/10 bg-white/95 shadow-[0_35px_80px_rgba(0,0,0,0.35)] backdrop-blur-sm text-slate-800">

          <div class="grid grid-cols-1 md:grid-cols-2 gap-0">

            <!-- Colonna sinistra: info di contatto -->
            <div class="px-8 sm:px-10 py-12 border-b md:border-b-0 md:border-r border-slate-200">
              <h2 class="text-2xl md:text-3xl font-semibold text-[#7c3aed]">APS Auriga</h2>
              <p class="mt-3 text-slate-600 leading-relaxed">
                Siamo un centro di ricerca artistica attivo nella pratica dell'Arte Drammatica e della Sprachgestaltung.
              </p>

              <div class="mt-8 space-y-6">
                <!-- Email -->
                <div>
                  <div class="flex items-center gap-2 mb-1">
                    <svg class="w-5 h-5 text-[#7c3aed] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    <h3 class="font-semibold text-slate-900">Email</h3>
                  </div>
                  <a href="mailto:info.sprachgestaltung@gmail.com" class="text-[#7c3aed] hover:text-[#6d28d9] transition-colors font-medium break-all">
                    info.sprachgestaltung@gmail.com
                  </a>
                </div>

                <!-- Sede -->
                <div>
                  <div class="flex items-center gap-2 mb-1">
                    <svg class="w-5 h-5 text-[#7c3aed] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <h3 class="font-semibold text-slate-900">Sede</h3>
                  </div>
                  <p class="text-slate-600 leading-relaxed">Roma, Italia</p>
                </div>
              </div>

              <!-- Messaggio decorativo -->
              <div class="mt-10 p-4 bg-[#7c3aed]/8 rounded-xl border border-[#7c3aed]/20">
                <p class="text-sm text-slate-600 leading-relaxed italic">
                  "La parola è il gesto dell'anima." — Rudolf Steiner
                </p>
              </div>
            </div>

            <!-- Colonna destra: form di contatto -->
            <div class="px-8 sm:px-10 py-12">
              <h2 class="text-xl font-semibold text-slate-900 mb-6">Invia un messaggio</h2>

              <!-- Form — usa Web3Forms. Sostituisci YOUR_ACCESS_KEY con la chiave ottenuta su https://web3forms.com -->
              <form
                id="contact-form"
                action="https://api.web3forms.com/submit"
                method="POST"
                class="space-y-5"
                novalidate
              >
                <!-- Web3Forms access key — da configurare -->
                <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY" />
                <input type="hidden" name="subject" value="Nuovo messaggio dal sito Auriga" />
                <input type="hidden" name="redirect" value="false" />
                <!-- Honeypot anti-spam -->
                <input type="checkbox" name="botcheck" class="hidden" style="display:none" tabindex="-1" autocomplete="off" />

                <!-- Nome -->
                <div>
                  <label for="nome" class="block text-sm font-medium text-slate-700 mb-1">Nome <span class="text-red-500">*</span></label>
                  <input
                    type="text"
                    id="nome"
                    name="name"
                    required
                    autocomplete="name"
                    placeholder="Il tuo nome"
                    class="w-full px-4 py-2.5 rounded-xl border border-slate-300 text-slate-800 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#7c3aed]/50 focus:border-[#7c3aed] transition-colors text-sm"
                  />
                </div>

                <!-- Email -->
                <div>
                  <label for="email" class="block text-sm font-medium text-slate-700 mb-1">Email <span class="text-red-500">*</span></label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    autocomplete="email"
                    placeholder="la-tua@email.com"
                    class="w-full px-4 py-2.5 rounded-xl border border-slate-300 text-slate-800 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#7c3aed]/50 focus:border-[#7c3aed] transition-colors text-sm"
                  />
                </div>

                <!-- Oggetto -->
                <div>
                  <label for="oggetto" class="block text-sm font-medium text-slate-700 mb-1">Oggetto</label>
                  <input
                    type="text"
                    id="oggetto"
                    name="oggetto"
                    placeholder="Es. Informazioni corsi, collaborazione..."
                    class="w-full px-4 py-2.5 rounded-xl border border-slate-300 text-slate-800 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#7c3aed]/50 focus:border-[#7c3aed] transition-colors text-sm"
                  />
                </div>

                <!-- Messaggio -->
                <div>
                  <label for="messaggio" class="block text-sm font-medium text-slate-700 mb-1">Messaggio <span class="text-red-500">*</span></label>
                  <textarea
                    id="messaggio"
                    name="message"
                    required
                    rows="5"
                    placeholder="Scrivi il tuo messaggio..."
                    class="w-full px-4 py-2.5 rounded-xl border border-slate-300 text-slate-800 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#7c3aed]/50 focus:border-[#7c3aed] transition-colors text-sm resize-none"
                  ></textarea>
                </div>

                <!-- Submit button -->
                <button
                  type="submit"
                  id="submit-btn"
                  class="w-full py-3 px-6 rounded-xl bg-[#7c3aed] hover:bg-[#6d28d9] text-white font-semibold text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-[#7c3aed]/50 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed"
                >
                  Invia messaggio
                </button>

                <!-- Feedback -->
                <div id="form-success" class="hidden text-center py-3 px-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm font-medium">
                  Messaggio inviato! Ti risponderemo il prima possibile.
                </div>
                <div id="form-error" class="hidden text-center py-3 px-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm">
                  Si è verificato un errore. Prova a scriverci direttamente via email.
                </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  document.addEventListener('astro:page-load', () => {
    const form = document.getElementById('contact-form') as HTMLFormElement | null;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement | null;
    const successMsg = document.getElementById('form-success');
    const errorMsg = document.getElementById('form-error');

    if (!form) return;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!submitBtn) return;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Invio in corso...';
      successMsg?.classList.add('hidden');
      errorMsg?.classList.add('hidden');

      try {
        const data = new FormData(form);
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: data,
        });
        const result = await response.json();

        if (result.success) {
          form.reset();
          successMsg?.classList.remove('hidden');
        } else {
          errorMsg?.classList.remove('hidden');
        }
      } catch {
        errorMsg?.classList.remove('hidden');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Invia messaggio';
      }
    });
  });
</script>
