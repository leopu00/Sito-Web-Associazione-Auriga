---
import BaseLayout from "../../layouts/BaseLayout.astro";
---

<BaseLayout title="Corsi permanenti — Auriga" headerTheme="light" pageNamespace="corsi-permanenti" pageClass="bg-white text-black" pageBg="light">
  <section class="max-w-6xl mx-auto px-4 py-12 pt-20">
    <h1 class="text-3xl font-bold mb-6">Corsi permanenti</h1>
    <p class="text-lg leading-relaxed text-justify">
      Fin dal <strong>2016</strong>, APS Auriga organizza corsi della durata <strong>triennale</strong>, con incontri a cadenza <strong>mensile</strong>,
      per tutti coloro che desiderano specializzarsi in <strong>Sprachgestaltung</strong> in lingua italiana e <strong>Arte drammatica</strong>.<br></p>
    <div class="mb-10"></div>
    <div class="w-full mb-6 rounded-lg overflow-hidden h-64 md:h-80">
      <div class="relative w-full h-full">
        <div class="flex transition-transform duration-700 ease-in-out will-change-transform h-full" id="carousel-permanenti">
          <img src="/img/CorsoPermanente1.jpg" alt="Corsi permanenti – 1" class="w-full h-full object-contain object-center flex-none shrink-0" />
          <img src="/img/CorsoPermanente2.jpg" alt="Corsi permanenti – 2" class="w-full h-full object-contain object-center flex-none shrink-0" />
          <img src="/img/CorsoPermanente3.jpg" alt="Corsi permanenti – 3" class="w-full h-full object-contain object-center flex-none shrink-0" />
        </div>
        <!-- Frecce -->
        <button onclick="movePermanenti(-1)" class="absolute top-1/2 left-0 -translate-y-1/2 bg-black/60 text-white p-2 rounded">←</button>
        <button onclick="movePermanenti(1)" class="absolute top-1/2 right-0 -translate-y-1/2 bg-black/60 text-white p-2 rounded">→</button>
      </div>
    </div>

    <script is:inline>
      window.addEventListener('DOMContentLoaded', () => {
        let idxP = 0;
        const carP = document.getElementById('carousel-permanenti');
        const totP = carP ? carP.children.length : 0;
        function movePermanenti(d) {
          if (!carP || totP === 0) return;
          idxP = (idxP + d + totP) % totP;
          carP.style.transform = `translateX(-${idxP * 100}%)`;
        }
        // Expose for arrow buttons defined with inline onclick
        window.movePermanenti = movePermanenti;

        // Modal handling
        const imgs = carP ? carP.querySelectorAll('img') : [];
        const modal = document.getElementById('imgModal');
        const modalImg = document.getElementById('modalImg');

        imgs.forEach((img) => {
          img.classList.add('cursor-zoom-in');
          img.addEventListener('click', () => {
            if (modal && modalImg) {
              modalImg.src = img.src;
              modal.classList.remove('hidden');
              modal.classList.add('flex');
            }
          });
        });

        function closeModal() {
          if (modal) {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            if (modalImg) modalImg.src = '';
          }
        }
        // Expose close for the ✕ button (inline onclick)
        window.closeModal = closeModal;

        // Close on click outside the image
        if (modal) {
          modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
          });
        }
        // Close on ESC
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') closeModal();
        });
      });
    </script>
    <div class="mb-10"></div>
      <p class="text-lg leading-relaxed text-justify">I corsi sono organizzati in collaborazione con l’
      <strong>
        <a href="https://www.accademiaaldobargero.com/" target="_blank" rel="noopener" class="text-blue-600 underline"
        >Accademia Aldo Bargero</a>
      </strong>
      e si tengono nella sede
      dell’Accademia, presso <strong>Oriago di Mira</strong>.
    </p>
    <div class="w-full max-w-4xl mx-auto mt-10">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2799.038335561375!2d12.1842398!3d45.448883599999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x477eb64ef9c27e39%3A0xd828fd3bf4e97e48!2sLibera%20Accademia%20%22Aldo%20Bargero%22!5e0!3m2!1sit!2sit!4v1755545274970!5m2!1sit!2sit"
        title="Mappa sede corsi Auriga"
        width="100%"
        height="400"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
      <p class="mt-2 text-center">
        <a href="https://maps.app.goo.gl/vA87Jf8eRZ956K5F8" target="_blank" class="text-blue-500 underline">
          Apri in Google Maps
        </a>
      </p>
    </div>
    <div class="mt-10 flex justify-between items-center max-w-2xl mx-auto w-full">
      <a
        href="/formazione"
        class="inline-block px-5 py-3 border border-black rounded hover:bg-black hover:text-white transition-colors"
      >
        Indietro
      </a>
      <a
        href="/contatti"
        class="inline-block px-5 py-3 border border-black rounded hover:bg-black hover:text-white transition-colors"
      >
        Contattaci per ulteriori informazioni
      </a>
    </div>
    <div id="imgModal" class="fixed inset-0 bg-black/90 hidden items-center justify-center z-50">
      <img id="modalImg" src="" alt="Immagine a schermo intero" class="max-w-full max-h-full object-contain" />
      <button onclick="closeModal()" class="absolute top-4 right-4 text-white text-2xl">✕</button>
    </div>
  </section>
</BaseLayout>